{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block title %}Home - Questions{% endblock %}

{% block searchblock %}
<section 
  class="d-flex align-items-center justify-content-center mb-5 text-center text-white"
  style="
    background: linear-gradient(rgba(59, 77, 94, 0.85), rgba(51, 125, 204, 0.85)),
    url('https://about.fb.com/wp-content/uploads/2022/11/Community-Forums-Phase-2_Header.jpg?w=1920') top/cover no-repeat;
    min-height: 300px;
    padding: 60px 0;
  "
>
  <div class="container">
    <h2 class="fw-bold mb-4 fs-2">How Can We Help?</h2>

    <form method="get" class="row justify-content-center align-items-center g-2">

      <div class="col-md-6 col-sm-12">
        <input 
          type="text" 
          name="question" 
          value="{{ search_query }}" 
          class="form-control form-control rounded-pill px-4 py-3"
          placeholder="Enter a keyword..." 
        />
      </div>

      <div class="col-md-3 col-sm-8">
        <select name="tag" class="form-select form-select rounded-pill px-4 py-3">
          <option value="">All Tags</option>
          {% for tag in tags %}
            <option value="{{ tag.name }}" {% if tag.name == selected_tag %}selected{% endif %}>
              {{ tag.name }}
            </option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-1 col-sm-4 d-grid">
        <button 
          type="submit" 
          class="btn btn-light btn rounded-pill d-flex align-items-center justify-content-center fw-semibold"
        >
          <i class="bi bi-search"></i>
        </button>
      </div>

      <div class="col-md-2 col-sm-6 d-grid">
        <a 
          href="{% url 'question_list' %}" 
          class="btn btn-outline-light btn rounded-pill fw-semibold d-flex align-items-center justify-content-center"
        >
          Clear
        </a>
      </div>
    </form>
  </div>
</section>
{% endblock %}

{% block content %}
<h2 class="mb-4">Recent Questions</h2>
<div class="row">
  {% for question in questions %}
  <div class="col-md-12 mb-3">
    <a href="{% url 'question_detail' question.pk %}" class="text-decoration-none text-reset">
      {% include "forum/_question_card.html" %}
    </a>
  </div>
  {% empty %}
  <p>No questions found.</p>
  {% endfor %}
</div>

{% include "_pagination.html" %}
{% endblock %}
