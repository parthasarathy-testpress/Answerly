<div class="card shadow-sm border-1 rounded-3 p-3 mb-3"
   style="transition: transform 0.2s, box-shadow 0.2s;"
     onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 15px rgba(0,0,0,0.15)';"
     onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='';">
  <div class="card-body">
    <div class="d-flex justify-content-between mb-2">
      <strong>{{ comment.author.username }}</strong>
      {% if request.user.is_authenticated and request.user == comment.author %}
        <div class="d-flex justify-content-end gap-3">
            <a href="{% url 'comment_update' comment_id=comment.pk %}" class="text-primary fs-5" title="Edit comment">
                <i class="bi bi-pencil-square"></i>
            </a>
            <a href="{% url 'comment_delete' comment_id=comment.pk %}" class="text-danger fs-5" title="Delete comment">
                <i class="bi bi-trash"></i>
            </a>
        </div>
      {% endif %}
      
    </div>

    <p class="mb-3">{{ comment.content }}</p>

    {% with user_vote=comment.user_vote|default:0 %}
    <div class="d-flex gap-2 align-items-center" data-vote-group="comment-{{ comment.id }}">
      <button
        class="btn btn-sm vote-btn {% if user_vote == 1 %}btn-success text-white{% else %}btn-outline-success{% endif %}"
        data-type="1"
        data-url="{% url 'vote' 'comment' comment.id %}"
        data-vote-type="1"
        @click.prevent.stop="vote($event)"
      >
        <i class="bi bi-hand-thumbs-up"></i>
        (<span data-upvote-count>{{ comment.upvotes }}</span>)
      </button>
      <button
        class="btn btn-sm vote-btn {% if user_vote == -1 %}btn-danger text-white{% else %}btn-outline-danger{% endif %}"
        data-type="-1"
        data-url="{% url 'vote' 'comment' comment.id %}"
        data-vote-type="-1"
        @click.prevent.stop="vote($event)"
      >
        <i class="bi bi-hand-thumbs-down"></i>
        (<span data-downvote-count>{{ comment.downvotes }}</span>)
      </button>
  </div>
    {% endwith %}
</div>
